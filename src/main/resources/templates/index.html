<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header"></head>
<body>
<header th:replace="fragments/navigation"></header>
<main class="canvas-container">
    <link href="/css/home.css" rel="stylesheet"/>
    <div class="home-container">
        <div class="home-banner">
            <div class="home-container2">
                <h1 class="home-text15">Which Pet Food?</h1>
                <span class="home-text16">
              <span class="home-text17">
                Finding the right food can be a long and difficult journey. What
                food is best for the age or breed of my pet? Is the food
                nutritious and healthy?
              </span>
              <br/>
              <span>
                We are here to help you find answers to these questions and
                more...
              </span>
              <br/>
            </span>
            </div>
            <img
                    alt="image"
                    src="/images/photo-1593945612858-21310238eb77.jpg"
                    class="home-image"
            />
        </div>
        <div class="home-features">
            <h1 class="home-text21">Featured Brands</h1>
            <span class="home-text22">
            Discover products from the top, latest and trending brands
          </span>
            <div class="home-container3">
                <div class="feature-card1-feature-card feature-card1-root-class-name"
                th:each="brand : ${featuredBrands}">
                    <a th:href="@{products/by-brand/{id}(id=${brand.id})}">
                        <img
                            alt="image"
                            th:src="${brand.picUrl}"
                            class="feature-card1-image"
                    />
                    </a>
                </div>
            </div>
        </div>
        <h1 class="home-text23">Featured Reviews</h1>
        <div class="home-reviews">
            <th:block th:if="${mostReviewed.size() == 0}" class="review-card1-text1">Be the first to leave a review!</th:block>

            <div class="home-container4" th:each="review : ${mostReviewed}">
                <a th:href="@{/products/details/{id}(id=*{review.productId})}"><div
                        class="review-card1-blog-post-card review-card1-root-class-name3"
                >
                    <img
                            alt="image"
                            th:src="${review.productPicUrl}"
                            class="review-card1-image"
                    />
                    <div class="review-card1-container">
                <span id="title" class="review-card1-text">
                  <span th:text="|For product: ${review.productName}|">Lorem ipsum dolor sit amet</span>
                </span>
                        <span id="comment" class="review-card1-text1">
                  <span th:text="${review.content}">
                    Lorem ipsum dolor sit amet, consectetur, adipiscing elit.
                    Sed non volutpat turpis. ​ Mauris luctus rutrum mi ut
                    rhoncus. Integer in dignissim tortor. Lorem ​​ ipsum dolor
                    sit amet, consectetur adipiscing elit.
                  </span>
                </span>
                        <div class="review-card1-container1">
                            <div class="review-card1-profile">
                                <img
                                        id="userUrl"
                                        alt="profile"
                                        th:src="${review.authorProfilePic}"
                                        class="review-card1-image1"
                                />
                                <span id="displayName" class="review-card1-text2">
                      <span th:text="${review.authorDisplayName}">Jon Doe</span>
                    </span>
                            </div>
                        </div>
                    </div>
                </div>
                </a>
            </div>
        </div>
    </div>
</main>
<footer th:replace="fragments/footer"></footer>
<script>
    window.onload = () => {
        const runAllScripts = () => {
            initializeAllAccordions()
        }

        const listenForUrlChanges = () => {
            let url = location.href
            document.body.addEventListener(
                'click',
                () => {
                    requestAnimationFrame(() => {
                        if (url !== location.href) {
                            runAllScripts()
                            url = location.href
                        }
                    })
                },
                true
            )
        }

        const initializeAllAccordions = () => {
            const allAccordions = document.querySelectorAll('[data-role="Accordion"]');

            allAccordions.forEach((accordion) => {
                const accordionHeader = accordion.querySelector('[data-type="accordion-header"]')
                const accordionContent = accordion.querySelector('[data-type="accordion-content"]')

                accordionHeader.addEventListener('click', () => {
                    if (accordionContent.style.maxHeight) {
                        accordionContent.style.maxHeight = ''
                    } else {
                        accordionContent.style.maxHeight = `${accordionContent.scrollHeight}px`
                    }
                })
            })
        }

        listenForUrlChanges()
        runAllScripts()
    }
</script>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</body>
</html>
